unbind C-b                                                    # Unbind default prefix key
set-option -g prefix C-a                                      # Change prefix key from Ctrl-b to Ctrl-a
bind C-a send-prefix                                          # Allow sending prefix key to nested sessions

unbind r                                                      # Unbind default r key
bind r source-file ~/.tmux.conf \; display "Reloaded!"        # Bind r to reload tmux configuration

unbind %                                                      # Unbind default horizontal split key
bind | split-window -h                                        # Bind | to split window horizontally

unbind '"'                                                    # Unbind default vertical split key
bind - split-window -v                                        # Bind - to split window vertically

# Move between panes (no prefix)
bind -n C-h select-pane -L                                    # Move to the left pane with Ctrl+h (no prefix)
bind -n C-j select-pane -D                                    # Move to the below pane with Ctrl+j (no prefix)
bind -n C-k select-pane -U                                    # Move to the above pane with Ctrl+k (no prefix)
bind -n C-l select-pane -R                                    # Move to the right pane with Ctrl+l (no prefix)

# Resize panes (with prefix, repeatable)
bind -r H resize-pane -L 5                                    # Shift+H to resize current pane 5 cells to the left
bind -r J resize-pane -D 5                                    # Shift+J to resize current pane 5 cells down
bind -r K resize-pane -U 5                                    # Shift+K to resize current pane 5 cells up
bind -r L resize-pane -R 5                                    # Shift+L to resize current pane 5 cells to the right

bind -r m resize-pane -Z                                      # Toggle pane zoom with m
bind -n M-I setw synchronize-panes on                         # Enable pane synchronization with M-I
bind -n M-i setw synchronize-panes off                        # Disable pane synchronization with M-i

set -g base-index 1                                           # Start window index at 1 (match keyboard order)
set -g pane-base-index 1                                      # Start pane index at 1 (match keyboard order)
set -g renumber-windows on                                    # Re-number windows sequentially after closing them
set -g allow-rename off                                       # Prevent shell from renaming windows after setting it once

set-option -g status-position top                             # Show the tmux status bar at the top of every window (instead of the default bottom)
set-window-option -g mode-keys vi                             # Use vi key bindings in copy mode

set -g default-terminal "screen-256color"                     # Set terminal type for proper color support
set -g history-limit 10000                                    # Extend history limit

set -g mouse on                                               # Enable mouse support

bind -T copy-mode-vi 'v' send -X begin-selection              # Start selecting text with "v"
bind -T copy-mode-vi 'y' send -X copy-selection               # Copy text with "y"

unbind -T copy-mode-vi MouseDragEnd1Pane                      # Don't exit copy mode after dragging with mouse

# List of tmux plugins
set -g @plugin 'tmux-plugins/tpm'                             # Tmux plugin manager
set -g @plugin 'tmux-plugins/tmux-sensible'                   # A set of tmux options that should be acceptable to everyone
set -g @plugin 'tmux-plugins/tmux-continuum'                  # Automatically saves sessions for you every 15 minutes
set -g @plugin 'tmux-plugins/tmux-resurrect'                  # Persist tmux sessions after computer restart
set -g @plugin 'christoomey/vim-tmux-navigator'               # For navigating panes and vim/nvim with Ctrl-hjkl

# set -g @continuum-restore 'on'                                # Enable tmux-continuum functionality
# set -g @resurrect-capture-pane-contents 'on'                  # Allow tmux-resurrect to capture pane contents

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
